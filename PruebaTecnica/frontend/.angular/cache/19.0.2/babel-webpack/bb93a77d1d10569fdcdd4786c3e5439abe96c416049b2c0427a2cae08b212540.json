{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/cliente.service\";\nimport * as i2 from \"@angular/router\";\nfunction PantallaBusquedaComponent_option_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const tipo_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", tipo_r1.valor);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", tipo_r1.descripcion, \" \");\n  }\n}\nexport let PantallaBusquedaComponent = /*#__PURE__*/(() => {\n  class PantallaBusquedaComponent {\n    constructor(clienteService, router) {\n      this.clienteService = clienteService;\n      this.router = router;\n      this.tipoDocumento = '';\n      this.numeroDocumento = '';\n      this.botonHabilitado = false;\n      // Lista de tipos de documento para usar en el select del template\n      this.tiposDocumento = [{\n        valor: 'CC',\n        descripcion: 'Cédula de Ciudadanía'\n      }, {\n        valor: 'TI',\n        descripcion: 'Tarjeta de Identidad'\n      }, {\n        valor: 'CE',\n        descripcion: 'Carnet de Extranjería'\n      }];\n    }\n    // Actualiza el estado del botón según los campos\n    verificarCampos() {\n      this.botonHabilitado = this.tipoDocumento !== '' && /^\\d{8,11}$/.test(this.numeroDocumento.trim());\n    }\n    // Lógica para buscar al cliente y redirigir si se encuentra\n    buscarCliente() {\n      this.clienteService.obtenerCliente({\n        tipo: this.tipoDocumento,\n        numero: this.numeroDocumento\n      }).subscribe({\n        next: cliente => {\n          if (cliente) {\n            sessionStorage.setItem('cliente', JSON.stringify(cliente));\n            this.router.navigate(['/resumen']);\n          } else {\n            alert('Cliente no encontrado.');\n          }\n        },\n        error: () => {\n          alert('Error en el servidor o no se pudo encontrar al cliente.');\n        }\n      });\n    }\n    static {\n      this.ɵfac = function PantallaBusquedaComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PantallaBusquedaComponent)(i0.ɵɵdirectiveInject(i1.ClienteService), i0.ɵɵdirectiveInject(i2.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: PantallaBusquedaComponent,\n        selectors: [[\"app-pantalla-busqueda\"]],\n        decls: 15,\n        vars: 4,\n        consts: [[1, \"form-container\"], [1, \"form-group\"], [\"for\", \"tipoDocumento\", 1, \"form-label\"], [\"id\", \"tipoDocumento\", 1, \"form-select\", 3, \"ngModelChange\", \"change\", \"ngModel\"], [\"value\", \"\", \"disabled\", \"\", \"selected\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"for\", \"numeroDocumento\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"numeroDocumento\", \"placeholder\", \"Ingresa tu n\\u00FAmero de documento\", \"maxlength\", \"11\", 1, \"form-input\", 3, \"ngModelChange\", \"input\", \"ngModel\"], [1, \"btn\", \"btn-primary\", 3, \"click\", \"disabled\"], [3, \"value\"]],\n        template: function PantallaBusquedaComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"label\", 2);\n            i0.ɵɵtext(3, \"Tipo de Documento:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"select\", 3);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function PantallaBusquedaComponent_Template_select_ngModelChange_4_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.tipoDocumento, $event) || (ctx.tipoDocumento = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"change\", function PantallaBusquedaComponent_Template_select_change_4_listener() {\n              return ctx.verificarCampos();\n            });\n            i0.ɵɵelementStart(5, \"option\", 4);\n            i0.ɵɵtext(6, \"Selecciona un tipo\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(7, PantallaBusquedaComponent_option_7_Template, 2, 2, \"option\", 5);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(8, \"div\", 1)(9, \"label\", 6);\n            i0.ɵɵtext(10, \"N\\u00FAmero de Documento:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(11, \"input\", 7);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function PantallaBusquedaComponent_Template_input_ngModelChange_11_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.numeroDocumento, $event) || (ctx.numeroDocumento = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"input\", function PantallaBusquedaComponent_Template_input_input_11_listener() {\n              return ctx.verificarCampos();\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(12, \"div\", 1)(13, \"button\", 8);\n            i0.ɵɵlistener(\"click\", function PantallaBusquedaComponent_Template_button_click_13_listener() {\n              return ctx.buscarCliente();\n            });\n            i0.ɵɵtext(14, \" Buscar Cliente \");\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(4);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.tipoDocumento);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngForOf\", ctx.tiposDocumento);\n            i0.ɵɵadvance(4);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.numeroDocumento);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"disabled\", !ctx.botonHabilitado);\n          }\n        },\n        encapsulation: 2\n      });\n    }\n  }\n  return PantallaBusquedaComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}