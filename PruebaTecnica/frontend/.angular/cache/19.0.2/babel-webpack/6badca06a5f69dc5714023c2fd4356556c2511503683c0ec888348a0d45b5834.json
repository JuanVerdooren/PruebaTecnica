{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/cliente.service\";\nimport * as i2 from \"@angular/router\";\nexport let PantallaBusquedaComponent = /*#__PURE__*/(() => {\n  class PantallaBusquedaComponent {\n    constructor(clienteService, router) {\n      this.clienteService = clienteService;\n      this.router = router;\n      this.tipoDocumento = '';\n      this.numeroDocumento = '';\n      this.botonHabilitado = false;\n      // Lista de tipos de documento para un control más fácil en el template\n      this.tiposDocumento = ['DNI', 'RUC', 'Carnet Extranjería'];\n    }\n    // Verifica que los campos no estén vacíos y que el número de documento tenga un formato válido\n    verificarCampos() {\n      this.botonHabilitado = this.tipoDocumento !== '' && /^\\d{8,11}$/.test(this.numeroDocumento);\n    }\n    // Llama al servicio y navega al resumen o muestra un error\n    buscarCliente() {\n      this.clienteService.obtenerCliente({\n        tipo: this.tipoDocumento,\n        numero: this.numeroDocumento\n      }).subscribe(cliente => {\n        // Verifica si el cliente existe antes de navegar\n        if (cliente) {\n          sessionStorage.setItem('cliente', JSON.stringify(cliente));\n          this.router.navigate(['/resumen']);\n        } else {\n          alert('Cliente no encontrado.');\n        }\n      }, () => {\n        alert('Error en el servidor o no se pudo encontrar al cliente.');\n      });\n    }\n    static {\n      this.ɵfac = function PantallaBusquedaComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PantallaBusquedaComponent)(i0.ɵɵdirectiveInject(i1.ClienteService), i0.ɵɵdirectiveInject(i2.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: PantallaBusquedaComponent,\n        selectors: [[\"app-pantalla-busqueda\"]],\n        decls: 18,\n        vars: 3,\n        consts: [[1, \"form-container\"], [1, \"form-group\"], [\"for\", \"tipoDocumento\", 1, \"form-label\"], [\"id\", \"tipoDocumento\", 1, \"form-select\", 3, \"ngModelChange\", \"change\", \"ngModel\"], [\"value\", \"\", \"disabled\", \"\", \"selected\", \"\"], [\"value\", \"CC\"], [\"value\", \"TI\"], [\"for\", \"numeroDocumento\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"numeroDocumento\", \"placeholder\", \"Ingresa tu n\\u00FAmero de documento\", \"maxlength\", \"11\", 1, \"form-input\", 3, \"ngModelChange\", \"input\", \"ngModel\"], [1, \"btn\", \"btn-primary\", 3, \"click\", \"disabled\"]],\n        template: function PantallaBusquedaComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"label\", 2);\n            i0.ɵɵtext(3, \"Tipo de Documento:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"select\", 3);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function PantallaBusquedaComponent_Template_select_ngModelChange_4_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.tipoDocumento, $event) || (ctx.tipoDocumento = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"change\", function PantallaBusquedaComponent_Template_select_change_4_listener() {\n              return ctx.verificarCampos();\n            });\n            i0.ɵɵelementStart(5, \"option\", 4);\n            i0.ɵɵtext(6, \"Selecciona un tipo\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(7, \"option\", 5);\n            i0.ɵɵtext(8, \"C\\u00E9dula de Ciudadan\\u00EDa\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(9, \"option\", 6);\n            i0.ɵɵtext(10, \"Tarjeta de Identidad\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(11, \"div\", 1)(12, \"label\", 7);\n            i0.ɵɵtext(13, \"N\\u00FAmero de Documento:\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(14, \"input\", 8);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function PantallaBusquedaComponent_Template_input_ngModelChange_14_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.numeroDocumento, $event) || (ctx.numeroDocumento = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"input\", function PantallaBusquedaComponent_Template_input_input_14_listener() {\n              return ctx.verificarCampos();\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(15, \"div\", 1)(16, \"button\", 9);\n            i0.ɵɵlistener(\"click\", function PantallaBusquedaComponent_Template_button_click_16_listener() {\n              return ctx.buscarCliente();\n            });\n            i0.ɵɵtext(17, \" Buscar Cliente \");\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(4);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.tipoDocumento);\n            i0.ɵɵadvance(10);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.numeroDocumento);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"disabled\", !ctx.botonHabilitado);\n          }\n        },\n        encapsulation: 2\n      });\n    }\n  }\n  return PantallaBusquedaComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}