{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/cliente.service\";\nimport * as i2 from \"@angular/router\";\nexport let PantallaBusquedaComponent = /*#__PURE__*/(() => {\n  class PantallaBusquedaComponent {\n    constructor(clienteService, router) {\n      this.clienteService = clienteService;\n      this.router = router;\n      this.tipoDocumento = '';\n      this.numeroDocumento = '';\n      this.botonHabilitado = false;\n      // Lista de tipos de documento para un control más fácil en el template\n      this.tiposDocumento = ['DNI', 'RUC', 'Carnet Extranjería'];\n    }\n    // Verifica que los campos no estén vacíos y que el número de documento tenga un formato válido\n    verificarCampos() {\n      this.botonHabilitado = this.tipoDocumento !== '' && /^\\d{8,11}$/.test(this.numeroDocumento);\n    }\n    // Llama al servicio y navega al resumen o muestra un error\n    buscarCliente() {\n      this.clienteService.obtenerCliente({\n        tipo: this.tipoDocumento,\n        numero: this.numeroDocumento\n      }).subscribe(cliente => {\n        // Verifica si el cliente existe antes de navegar\n        if (cliente) {\n          sessionStorage.setItem('cliente', JSON.stringify(cliente));\n          this.router.navigate(['/resumen']);\n        } else {\n          alert('Cliente no encontrado.');\n        }\n      }, () => {\n        alert('Error en el servidor o no se pudo encontrar al cliente.');\n      });\n    }\n    static {\n      this.ɵfac = function PantallaBusquedaComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PantallaBusquedaComponent)(i0.ɵɵdirectiveInject(i1.ClienteService), i0.ɵɵdirectiveInject(i2.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: PantallaBusquedaComponent,\n        selectors: [[\"app-pantalla-busqueda\"]],\n        decls: 23,\n        vars: 3,\n        consts: [[1, \"container\", \"mt-5\"], [1, \"text-center\"], [1, \"card\", \"p-4\", \"shadow\"], [1, \"form-group\", \"mb-3\"], [\"for\", \"tipoDocumento\"], [\"id\", \"tipoDocumento\", \"name\", \"tipoDocumento\", 1, \"form-select\", 3, \"ngModelChange\", \"change\", \"ngModel\"], [\"value\", \"\", \"disabled\", \"\", \"selected\", \"\"], [\"value\", \"C\"], [\"value\", \"P\"], [\"for\", \"numeroDocumento\"], [\"type\", \"text\", \"id\", \"numeroDocumento\", \"name\", \"numeroDocumento\", \"placeholder\", \"Ej: 1.234.567\", 1, \"form-control\", 3, \"ngModelChange\", \"input\", \"ngModel\"], [1, \"form-text\", \"text-muted\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", \"w-100\", 3, \"click\", \"disabled\"]],\n        template: function PantallaBusquedaComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\", 1);\n            i0.ɵɵtext(2, \"Consulta de Cliente\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"div\", 2)(4, \"form\")(5, \"div\", 3)(6, \"label\", 4);\n            i0.ɵɵtext(7, \"Tipo de Documento\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"select\", 5);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function PantallaBusquedaComponent_Template_select_ngModelChange_8_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.tipoDocumento, $event) || (ctx.tipoDocumento = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"change\", function PantallaBusquedaComponent_Template_select_change_8_listener() {\n              return ctx.verificarCampos();\n            });\n            i0.ɵɵelementStart(9, \"option\", 6);\n            i0.ɵɵtext(10, \"Seleccione...\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(11, \"option\", 7);\n            i0.ɵɵtext(12, \"C\\u00E9dula de Ciudadan\\u00EDa\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(13, \"option\", 8);\n            i0.ɵɵtext(14, \"Pasaporte\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(15, \"div\", 3)(16, \"label\", 9);\n            i0.ɵɵtext(17, \"N\\u00FAmero de Documento\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(18, \"input\", 10);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function PantallaBusquedaComponent_Template_input_ngModelChange_18_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.numeroDocumento, $event) || (ctx.numeroDocumento = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"input\", function PantallaBusquedaComponent_Template_input_input_18_listener() {\n              return ctx.verificarCampos();\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(19, \"small\", 11);\n            i0.ɵɵtext(20, \"Debe tener entre 8 y 11 d\\u00EDgitos.\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(21, \"button\", 12);\n            i0.ɵɵlistener(\"click\", function PantallaBusquedaComponent_Template_button_click_21_listener() {\n              return ctx.buscarCliente();\n            });\n            i0.ɵɵtext(22, \" Buscar \");\n            i0.ɵɵelementEnd()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(8);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.tipoDocumento);\n            i0.ɵɵadvance(10);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.numeroDocumento);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"disabled\", !ctx.botonHabilitado);\n          }\n        },\n        encapsulation: 2\n      });\n    }\n  }\n  return PantallaBusquedaComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}